<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Registro - LoveLink</title>
  <link rel="stylesheet" href="/static/auth.css" />
</head>
<body>
  <div class="background">
    <div class="shape"></div>
    <div class="shape"></div>
  </div>

  <form id="register-form">
    <h1>Registrarse</h1>

    <label for="email">Correo</label>
    <input type="email" id="email" placeholder="Correo" required />

    <label for="password">Contraseña</label>
    <input type="password" id="password" placeholder="Contraseña" required />

    <label for="name">Nombre</label>
    <input type="text" id="name" placeholder="Nombre" required />

    <label for="age">Edad</label>
    <input type="number" id="age" placeholder="Edad" required />

    <label for="gender">Género</label>
    <input type="text" id="gender" placeholder="Género" required />

    <label for="interests">Intereses</label>
    <input type="text" id="interests" placeholder="Intereses (coma separada)" required />

    <button type="submit">Registrarse</button>

    <p>¿Ya tienes cuenta? <a href="/login-page">Inicia sesión aquí</a></p>
  </form>

  <script>
    document.getElementById("register-form").addEventListener("submit", async (e) => {
      e.preventDefault();

      const body = {
        email: document.getElementById("email").value,
        password: document.getElementById("password").value,
        name: document.getElementById("name").value,
        age: parseInt(document.getElementById("age").value),
        gender: document.getElementById("gender").value,
        interests: document.getElementById("interests").value.split(",").map(i => i.trim())
      };

      const res = await fetch("/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });

      if (res.ok) {
        alert("Usuario registrado. Inicia sesión.");
        window.location.href = "/login-page";
      } else {
        alert("Error al registrarse.");
      }
    });
  </script>
</body>
</html>
